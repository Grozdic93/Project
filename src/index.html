<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <title>Project</title>
  <base href="/">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="icon" type="image/x-icon" href="favicon.ico">
</head>

<body>
  <app-root></app-root>
  <script>
    setTimeout(() => {
      const track = document.getElementById("image-track");

      const handleOnDown = e => track.dataset.mouseDownAt = e.clientX;

      const handleOnUp = () => {
        track.dataset.mouseDownAt = "0";
        track.dataset.prevPercentage = track.dataset.percentage;
      }

      const handleOnMove = e => {
        if (track.dataset.mouseDownAt === "0") return;

        const mouseDelta = parseFloat(track.dataset.mouseDownAt) - e.clientX,
          maxDelta = window.innerWidth / 2;

        const percentage = (mouseDelta / maxDelta) * -40,
          nextPercentageUnconstrained = parseFloat(track.dataset.prevPercentage) + percentage,
          nextPercentage = Math.max(Math.min(nextPercentageUnconstrained, 0), -100);

        track.dataset.percentage = nextPercentage;

        track.animate({
          transform: `translate(${nextPercentage}%, -50%)`
        }, { duration: 1200, fill: "forwards" });

        for (const image of track.getElementsByClassName("image")) {
          image.animate({
            objectPosition: `${100 + nextPercentage}% center`
          }, { duration: 1200, fill: "forwards" });
        }
      }

      /* -- Had to add extra lines for touch events -- */

      track.onmousedown = e => handleOnDown(e);

      track.ontouchstart = e => handleOnDown(e.touches[0]);

      track.onmouseup = e => handleOnUp(e);

      track.ontouchend = e => handleOnUp(e.touches[0]);

      track.onmousemove = e => handleOnMove(e);

      track.ontouchmove = e => handleOnMove(e.touches[0]);
    }, 500)

  </script>
</body>

</html>